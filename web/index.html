<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Afrobeats Playlist Gatekeeping Observatory | MSc Dissertation Project</title>
  <meta name="description" content="An interactive data observatory examining regional representation and gatekeeping patterns in Spotify's Afrobeats playlists - MSc Computing & Data Science dissertation project" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Merriweather:wght@700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  
  <!-- Navigation -->
  <nav class="main-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <div class="nav-brand">
        <span class="nav-logo">ðŸŽµ</span>
        <span class="nav-title">Afrobeats Observatory</span>
      </div>
      <button id="nav-toggle" class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-nav">
        <span class="sr-only">Toggle navigation</span>
        â˜°
      </button>
      <div id="primary-nav" class="nav-menu" data-nav-menu>
        <ul class="nav-links">
          <li><a href="#dashboard-main">Dashboard</a></li>
          <li><a href="https://rilchief-newtest-scriptsdashboard-dog5z2.streamlit.app/" target="_blank" rel="noopener noreferrer" class="streamlit-link">ðŸ“Š Streamlit Analytics</a></li>
          <li><a href="data.js" download>Data</a></li>
          <li><button id="theme-toggle" type="button" class="theme-toggle-btn" title="Toggle theme">ðŸŒ™ Neo</button></li>
        </ul>
      </div>
    </div>
    <div class="nav-backdrop" data-nav-backdrop hidden></div>
  </nav>

  <!-- Hero Section -->
  <header class="hero">
    <div class="hero-content">
      <div class="hero-grid">
        <div class="hero-copy">
          <div class="hero-badge">MSc Computing & Data Science Dissertation</div>
          <h1 class="hero-title">Afrobeats Playlist Gatekeeping Observatory</h1>
          <p class="hero-subtitle">
            An interactive observatory surfacing regional representation, curator concentration, and gatekeeping patterns across Spotify's Afrobeats ecosystem.
          </p>
          <ul class="hero-pills" aria-label="Project metadata">
            <!-- Project metadata pills intentionally removed for final submission -->
          </ul>
          <div class="hero-actions">
            <a class="btn btn-primary" href="#dashboard-main">Explore Dashboard</a>
            <a class="btn btn-streamlit" href="https://rilchief-newtest-scriptsdashboard-dog5z2.streamlit.app/" target="_blank" rel="noopener noreferrer">ðŸ“Š Streamlit Analytics</a>
            <a class="btn btn-outline" href="data.js" download>Download Dataset</a>
          </div>
        </div>
        <div class="hero-insight" aria-label="Latest data refresh">
          <div class="hero-insight-header">
            <p class="hero-insight-kicker">Live ingest snapshot</p>
            <h3>Data health</h3>
            <p class="hero-insight-copy">Track the freshness of Spotify pulls before diving into the dashboard.</p>
          </div>
          <div class="status-metrics hero-status">
            <article>
              <span class="status-label">Generated</span>
              <strong id="data-generated">--</strong>
            </article>
            <article>
              <span class="status-label">Ingestion started</span>
              <strong id="data-started">--</strong>
            </article>
            <article>
              <span class="status-label">Playlists captured</span>
              <strong id="dataset-playlist-count">--</strong>
            </article>
          </div>
        </div>
      </div>
    </div>
    <div class="hero-decoration"></div>
  </header>

  <!-- Interactive Dashboard -->
  <section id="dashboard-main" class="section dashboard-section">
    <div class="container-wide">
      <div class="section-header">
        <h2 class="section-title">Interactive Dashboard</h2>
        <div class="section-divider"></div>
        <p class="section-description">
          Filter and explore the dataset to uncover patterns of regional representation, curator concentration, 
          and artist visibility across Spotify's Afrobeats ecosystem.
        </p>
      </div>
      <div class="mobile-controls" aria-label="Mobile dashboard controls">
        <button id="filters-toggle" type="button" class="filters-toggle" aria-expanded="false" aria-controls="filters">
          Filters
        </button>
        <label class="quick-view-select-wrapper" for="quick-view-select">
          <span class="sr-only">Quick view preset</span>
          <select id="quick-view-select" name="quick-view-select">
            <option value="">Loading presetsâ€¦</option>
          </select>
        </label>
      </div>
      
      <div class="dashboard-grid">
        <aside id="filters" class="panel filters-panel" aria-label="Dashboard filters">
          <div class="filters-head">
            <div>
              <h3 class="filters-title">Insight controls</h3>
              <p>Blend curator lenses, release windows, and diaspora focus without scrolling away from the data.</p>
            </div>
            <button id="reset-filters" type="button" class="ghost-button">Reset</button>
          </div>
          <div class="filter-pills">
            <label class="filters-field" aria-label="Search playlist">
              <span>Search playlist</span>
              <input type="search" id="search" placeholder="Type a playlist name" />
            </label>
            <label class="toggle-pill">
              <input type="checkbox" id="diaspora-only" />
              <span>Diaspora focus</span>
            </label>
          </div>
          <p class="filters-hint">Filters apply instantly&mdash;mix search, curator groups, and release years to isolate a slice of the ecosystem.</p>
          <div class="quick-view-panel" role="group" aria-label="Quick view presets">
            <button type="button" class="quick-view-btn is-active" data-quick-view="all-placements" aria-pressed="true">All placements</button>
            <button type="button" class="quick-view-btn" data-quick-view="current-cycle" aria-pressed="false">Current cycle</button>
            <button type="button" class="quick-view-btn" data-quick-view="diaspora-wave" aria-pressed="false">Diaspora wave</button>
            <button type="button" class="quick-view-btn" data-quick-view="archive-dig" aria-pressed="false">Archive dig</button>
          </div>
          <p id="quick-view-status" class="filters-hint quick-view-status" role="status" aria-live="polite">
            Full dataset in view. Layer additional filters anytime.
          </p>
          <details class="filter-accordion" open>
            <summary>Curator lenses</summary>
            <div class="filter-accordion-body">
              <p>Select which playlist owners remain in scope.</p>
              <div id="curator-types" class="checkbox-list"></div>
            </div>
          </details>
          <details class="filter-accordion" open>
            <summary>Release year window</summary>
            <div class="filter-accordion-body">
              <div class="filter-range">
                <label>
                  From
                  <input type="number" id="min-year" min="2005" max="2030" step="1" />
                </label>
                <label>
                  To
                  <input type="number" id="max-year" min="2005" max="2030" step="1" />
                </label>
              </div>
            </div>
          </details>
        </aside>
        <div class="filters-backdrop" data-filters-backdrop hidden></div>

    <div class="dashboard-main-column">
      <div id="dashboard-loading" class="loading-overlay" role="status" aria-live="polite">
        <div class="loading-spinner" aria-hidden="true"></div>
        <p>Warming up charts and spotlightsâ€¦</p>
      </div>
      <div class="spotlight-grid">
      <section class="panel artist-panel" aria-label="Artist lookup">
        <div class="artist-panel-header">
          <div>
            <h2>Artist lookup</h2>
            <p>Search an artist to see where they appear across the filtered playlists.</p>
            <p class="panel-hint">Tip: begin typing to auto-complete; follower reach reflects playlist combinations after filters.</p>
          </div>
          <div class="artist-search-control">
            <label for="artist-search" class="sr-only">Search artist</label>
            <input type="search" id="artist-search" name="artist-search" placeholder="Type an artist name" list="artist-options" autocomplete="off" />
            <datalist id="artist-options"></datalist>
            <button id="artist-clear" type="button" class="ghost-button">Clear</button>
          </div>
        </div>
        <div id="artist-empty" class="empty-state" role="status" aria-live="polite">
          Start typing an artist's name to surface their placements.
        </div>
        <div id="artist-results" class="artist-results" hidden>
          <div class="artist-meta">
            <div>
              <h3 id="artist-name">Artist</h3>
              <p id="artist-origin" class="artist-origin">Origin unknown</p>
            </div>
            <div id="artist-flags" class="artist-flags"></div>
          </div>
          <div class="cards artist-metrics">
            <article class="card">
              <h4>Playlists</h4>
              <strong id="artist-metric-playlists">0</strong>
            </article>
            <article class="card">
              <h4>Track placements</h4>
              <strong id="artist-metric-tracks">0</strong>
            </article>
            <article class="card">
              <h4>Avg popularity</h4>
              <strong id="artist-metric-popularity">--</strong>
            </article>
            <article class="card">
              <h4>Median position</h4>
              <strong id="artist-metric-position">--</strong>
            </article>
            <article class="card">
              <h4>Spotify followers</h4>
              <strong id="artist-metric-spotify-followers">--</strong>
            </article>
            <article class="card">
              <h4>Playlist reach</h4>
              <strong id="artist-metric-followers">0</strong>
            </article>
          </div>
          <div class="table-wrapper table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Playlist</th>
                  <th>Curator</th>
                  <th>Tracks</th>
                  <th>Median position</th>
                  <th>Followers</th>
                  <th>First added</th>
                </tr>
              </thead>
              <tbody id="artist-playlist-rows"></tbody>
            </table>
          </div>
          <div class="table-wrapper table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Track</th>
                  <th>Playlist</th>
                  <th>Position</th>
                  <th>Popularity</th>
                  <th>Added</th>
                </tr>
              </thead>
              <tbody id="artist-track-rows"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="panel spotlight-panel" aria-label="Regional and country spotlight">
        <div class="spotlight-panel-header">
          <div>
            <h2>Spotlight</h2>
            <p>Switch between regional and country breakdowns under the same filters.</p>
          </div>
          <div id="spotlight-toggle" class="spotlight-toggle" role="tablist" aria-label="Spotlight mode">
            <button id="spotlight-mode-region" type="button" role="tab" aria-selected="true" tabindex="0" class="is-active" data-spotlight-mode="region">Region</button>
            <button id="spotlight-mode-country" type="button" role="tab" aria-selected="false" tabindex="-1" data-spotlight-mode="country">Country</button>
          </div>
        </div>

        <div id="spotlight-region-view" class="region-panel" data-spotlight-view="region">
          <div class="region-panel-header">
            <div>
              <p>Dive into a region to inspect playlist reach, top artists, and diaspora balance.</p>
              <p class="panel-hint">Navigate via the tabs or search box; every metric respects the active filters.</p>
            </div>
            <div class="region-search-control">
              <label for="region-search" class="sr-only">Search region</label>
              <input type="search" id="region-search" name="region-search" placeholder="Search region" autocomplete="off" list="region-options" />
              <datalist id="region-options"></datalist>
              <button id="region-clear" type="button" class="ghost-button">Clear</button>
            </div>
          </div>
          <div id="region-tabs" class="region-tabs" role="tablist" aria-label="Regions"></div>
          <div id="region-empty" class="empty-state" role="status" aria-live="polite">Pick a region to reveal its stats.</div>
          <div id="region-content" class="region-results" hidden>
            <div class="region-meta">
              <div>
                <h3 id="region-name">Region</h3>
                <p id="region-summary" class="region-summary">Summary</p>
              </div>
              <div id="region-flags" class="region-flags"></div>
            </div>
            <div class="cards region-metrics">
              <article class="card">
                <h4>Tracks</h4>
                <strong id="region-metric-tracks">0</strong>
              </article>
              <article class="card">
                <h4>Unique artists</h4>
                <strong id="region-metric-artists">0</strong>
              </article>
              <article class="card">
                <h4>Playlists</h4>
                <strong id="region-metric-playlists">0</strong>
              </article>
              <article class="card">
                <h4>Avg popularity</h4>
                <strong id="region-metric-popularity">--</strong>
              </article>
              <article class="card">
                <h4>Diaspora share</h4>
                <strong id="region-metric-diaspora">0%</strong>
              </article>
              <article class="card">
                <h4>Follower reach</h4>
                <strong id="region-metric-followers">0</strong>
              </article>
            </div>
              <details class="spotlight-details" open>
                <summary>Top artists</summary>
                <div class="table-wrapper table-scroll">
                  <table>
                    <thead>
                      <tr>
                        <th>Artist</th>
                        <th>Placements</th>
                        <th>Playlists</th>
                        <th>Avg popularity</th>
                        <th>Median position</th>
                        <th>Diaspora share</th>
                      </tr>
                    </thead>
                    <tbody id="region-artist-rows"></tbody>
                  </table>
                </div>
              </details>
              <details class="spotlight-details">
                <summary>Top playlists</summary>
                <div class="table-wrapper table-scroll">
                  <table>
                    <thead>
                      <tr>
                        <th>Playlist</th>
                        <th>Curator</th>
                        <th>Track placements</th>
                        <th>Unique artists</th>
                        <th>Median position</th>
                        <th>Followers</th>
                      </tr>
                    </thead>
                    <tbody id="region-playlist-rows"></tbody>
                  </table>
                </div>
              </details>
          </div>
        </div>

        <div id="spotlight-country-view" class="country-panel" data-spotlight-view="country" hidden>
          <div class="country-panel-header">
            <div>
              <p>Track how specific countries surface across playlists to spot emerging footholds.</p>
              <p class="panel-hint">Search for any artist homeland to reveal which playlists drive its footprint.</p>
            </div>
            <div class="country-search-control">
              <label for="country-search" class="sr-only">Search country</label>
              <input type="search" id="country-search" name="country-search" placeholder="Search country" autocomplete="off" list="country-options" />
              <datalist id="country-options"></datalist>
              <button id="country-clear" type="button" class="ghost-button">Clear</button>
            </div>
          </div>
          <div id="country-tabs" class="country-tabs" role="tablist" aria-label="Countries"></div>
          <div id="country-empty" class="empty-state" role="status" aria-live="polite">Pick a country to track its footprint.</div>
          <div id="country-content" class="country-results" hidden>
            <div class="country-meta">
              <div>
                <h3 id="country-name">Country</h3>
                <p id="country-summary" class="country-summary">Summary</p>
              </div>
              <div id="country-flags" class="country-flags"></div>
            </div>
            <div class="cards country-metrics">
              <article class="card">
                <h4>Tracks</h4>
                <strong id="country-metric-tracks">0</strong>
              </article>
              <article class="card">
                <h4>Unique artists</h4>
                <strong id="country-metric-artists">0</strong>
              </article>
              <article class="card">
                <h4>Playlists</h4>
                <strong id="country-metric-playlists">0</strong>
              </article>
              <article class="card">
                <h4>Avg popularity</h4>
                <strong id="country-metric-popularity">--</strong>
              </article>
              <article class="card">
                <h4>Diaspora share</h4>
                <strong id="country-metric-diaspora">0%</strong>
              </article>
              <article class="card">
                <h4>Follower reach</h4>
                <strong id="country-metric-followers">0</strong>
              </article>
            </div>
              <details class="spotlight-details" open>
                <summary>Top artists</summary>
                <div class="table-wrapper table-scroll">
                  <table>
                    <thead>
                      <tr>
                        <th>Artist</th>
                        <th>Placements</th>
                        <th>Playlists</th>
                        <th>Avg popularity</th>
                        <th>Median position</th>
                        <th>Diaspora share</th>
                      </tr>
                    </thead>
                    <tbody id="country-artist-rows"></tbody>
                  </table>
                </div>
              </details>
              <details class="spotlight-details">
                <summary>Top playlists</summary>
                <div class="table-wrapper table-scroll">
                  <table>
                    <thead>
                      <tr>
                        <th>Playlist</th>
                        <th>Curator</th>
                        <th>Track placements</th>
                        <th>Unique artists</th>
                        <th>Median position</th>
                        <th>Followers</th>
                      </tr>
                    </thead>
                    <tbody id="country-playlist-rows"></tbody>
                  </table>
                </div>
              </details>
          </div>
        </div>
      </section>
      </div>

      <section class="tabbed-content" aria-label="Dashboard insights" data-tab-root>

      <div class="chart-tabs" role="tablist" aria-label="Bias diagnostics">
        <button id="overview-tab" type="button" role="tab" aria-selected="true" aria-controls="overview-panel" tabindex="0" data-chart-tab="overview-panel" data-default-tab>Overview</button>
        <button id="release-tab" type="button" role="tab" aria-selected="false" aria-controls="release-panel" tabindex="-1" data-chart-tab="release-panel">Release momentum</button>
        <button id="popularity-tab" type="button" role="tab" aria-selected="false" aria-controls="popularity-panel" tabindex="-1" data-chart-tab="popularity-panel">Regional popularity</button>
        <button id="curator-tab" type="button" role="tab" aria-selected="false" aria-controls="curator-panel" tabindex="-1" data-chart-tab="curator-panel">Curator concentration</button>
        <button id="exposure-tab" type="button" role="tab" aria-selected="false" aria-controls="exposure-panel" tabindex="-1" data-chart-tab="exposure-panel">Exposure concentration</button>
      </div>

      <section id="overview-panel" class="chart-tab-panel" role="tabpanel" aria-labelledby="overview-tab" tabindex="0">
        <section class="cards" aria-label="Key metrics">
          <article class="card">
            <h4>Playlists analysed</h4>
            <strong id="playlist-count">0</strong>
            <span class="card-subtitle">after filters</span>
          </article>
          <article class="card">
            <h4>Tracks analysed</h4>
            <strong id="track-count">0</strong>
            <span class="card-subtitle">unique recordings</span>
          </article>
          <article class="card">
            <h4>Nigeria share</h4>
            <strong id="nigeria-share">0%</strong>
            <span class="card-subtitle">of tracks</span>
          </article>
          <article class="card">
            <h4>Diaspora representation</h4>
            <strong id="diaspora-share">0%</strong>
            <span class="card-subtitle">of tracks</span>
          </article>
          <article class="card">
            <h4>Regional diversity</h4>
            <strong id="diversity-score">0</strong>
            <span class="card-subtitle">avg. unique regions per playlist</span>
          </article>
        </section>
        <p id="filter-summary" class="filter-summary" role="status" aria-live="polite">
          Showing the full dataset. Adjust filters or quick views to narrate a specific storyline.
        </p>

        <article class="panel chart-panel spotlight" aria-label="Regional representation spotlight">
          <div>
            <h3>Regional representation</h3>
            <p>Distribution of artist origins across the filtered playlists. Hover to inspect counts.</p>
          </div>
          <canvas id="region-chart" aria-label="Regional representation chart" role="img"></canvas>
        </article>

        <section class="panel" aria-label="Playlist breakdown">
          <div class="panel-heading">
            <h2>Playlist breakdown</h2>
            <p>
              Compare reach, regional diversity, and diaspora visibility. Metrics reflect the current filter selection.
            </p>
          </div>
          <div class="playlist-picker" aria-label="Playlist picker">
            <label class="playlist-picker-label" for="dashboard-playlist-search">Pick a playlist from the dataset</label>
            <div class="playlist-picker-row">
              <input
                id="dashboard-playlist-search"
                type="search"
                list="dashboard-playlist-options"
                placeholder="Start typing a playlist name"
                autocomplete="off"
              />
              <datalist id="dashboard-playlist-options"></datalist>
              <button id="dashboard-playlist-clear" type="button" class="ghost-button">Clear</button>
            </div>
            <p id="dashboard-playlist-status" class="filters-hint" role="status" aria-live="polite">
              Type a playlist name to see its breakdown.
            </p>
          </div>

          <div class="playlist-breakdown-grid" aria-label="Selected playlist breakdown">
            <div class="playlist-breakdown-left">
              <div id="playlist-breakdown-metrics" class="playlist-breakdown-metrics" hidden></div>
              <div id="playlist-breakdown-prompt" class="empty-state" role="status" aria-live="polite">
                Select a playlist to see its breakdown metrics.
              </div>
              <div id="empty-state" class="empty-state" hidden role="status" aria-live="polite">
                No playlists match the current filters.
              </div>
            </div>

            <div class="playlist-breakdown-right">
              <div id="playlist-embed-dashboard" class="playlist-embed-dashboard" hidden>
                <h3 class="panel-subtitle">Play selected playlist on Spotify</h3>
                <iframe
                  id="playlist-embed-iframe-dashboard"
                  class="spotify-embed-frame"
                  src=""
                  width="100%"
                  height="352"
                  frameborder="0"
                  allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                  loading="lazy"
                  title="Spotify playlist player (dashboard)"
                ></iframe>
              </div>
            </div>

            <div class="table-wrapper table-scroll" id="playlist-tracks-panel" hidden>
              <h3 class="panel-subtitle">Tracks in selected playlist</h3>
              <table>
                <thead>
                  <tr>
                    <th>Track</th>
                    <th>Artist</th>
                    <th>Position</th>
                    <th>Popularity</th>
                    <th>Region</th>
                  </tr>
                </thead>
                <tbody id="playlist-tracks-rows"></tbody>
              </table>
            </div>
          </div>
        </section>
      </section>

      <article id="release-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="release-tab" tabindex="-1">
        <div>
          <h3>Release momentum</h3>
          <p>Year-over-year volume of releases featured across playlists. Highlights how curators favour recency.</p>
        </div>
        <canvas id="release-chart" aria-label="Release momentum chart" role="img"></canvas>
      </article>
      <article id="popularity-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="popularity-tab" tabindex="-1">
        <div>
          <h3>Regional popularity</h3>
            <p>Average Spotify track popularity by artist region. Spotify assigns a 0-100 score; higher means hotter in the recent window.</p>
        </div>
        <canvas id="popularity-chart" aria-label="Regional popularity chart" role="img"></canvas>
      </article>
      <article id="curator-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="curator-tab" tabindex="-1">
        <div>
          <h3>Curator concentration</h3>
          <p>Share of Nigerian artists per curator category. Lower values signal broader regional coverage.</p>
        </div>
        <canvas id="curator-chart" aria-label="Curator concentration chart" role="img"></canvas>
      </article>
      <article id="exposure-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="exposure-tab" tabindex="-1">
        <div>
          <h3>Exposure concentration</h3>
          <p>Top recurring primary artists across the selection. Higher bars mean heavier repeat playlisting.</p>
        </div>
        <canvas id="exposure-chart" aria-label="Exposure concentration chart" role="img"></canvas>
      </article>
    </section>
    </div>
      </div>
    </div>
  </section>


  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>About This Project</h4>
          <p>
            This observatory is part of an MSc dissertation examining algorithmic gatekeeping in music streaming platforms. 
            The research aims to surface quantifiable patterns of regional bias in Afrobeats playlist curation.
          </p>
        </div>
        <div class="footer-section">
          <h4>Data & Methods</h4>
          <p>
            All data synthesized from Spotify Web API for academic research purposes. 
            Playlist snapshots are timestamped and version-controlled for reproducibility. 
            Artist metadata is continuously validated against authoritative sources.
          </p>
        </div>
        <div class="footer-section">
          <h4>Academic Integrity</h4>
          <p>
            This research adheres to principles of open science and transparent methodology. 
            Dataset snapshots and analysis scripts are available for peer review and replication.
          </p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024-2025 MSc Computing & Data Science Dissertation Project. For academic research purposes only.</p>
        <p class="footer-disclaimer">
          Data synthesized from Spotify playlists for prototyping only. Replace <code>data.js</code> with live API output for 
          production research. Methods reference research into algorithmic gatekeeping.
        </p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" defer></script>
  <script src="data.js" defer></script>
  <script src="assets/app.js" defer></script>
</body>
</html>
