<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Afrobeats Playlist Gatekeeping Observatory</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="data/scripts/style.css" />
</head>
<body>
  <a href="#dashboard-main" class="skip-link">Skip to dashboard</a>
  <header>
    <h1>Afrobeats Playlist Gatekeeping Observatory</h1>
    <p>
      Explore how Spotify playlists shape the global identity of Afrobeats. Benchmark regional representation,
      curator influence, and sonic diversity across influential playlists to surface signals of gatekeeping and bias.
    </p>
    <div class="hero-actions">
      <a class="cta" href="data/scripts/data.js" download>Download current snapshot</a>
      <a class="cta secondary" href="#methodology">Project notes</a>
      <a class="cta secondary" href="scripts/fetch_spotify_data.py">Regenerate data</a>
    </div>
  </header>

  <section class="panel status-strip page-block" aria-label="Dataset status">
    <div class="status-metrics">
      <div>
        <span class="status-label">Generated</span>
        <strong id="data-generated">--</strong>
      </div>
      <div>
        <span class="status-label">Ingestion started</span>
        <strong id="data-started">--</strong>
      </div>
      <div>
        <span class="status-label">Playlists captured</span>
        <strong id="dataset-playlist-count">--</strong>
      </div>
      <div>
        <span class="status-label">Artists missing metadata</span>
        <strong id="dataset-missing-count">--</strong>
      </div>
    </div>
    <div class="status-note">
      <span class="status-label">Audio features (optional)</span>
      <span id="audio-feature-status" class="status-pill">Checking coverageâ€¦</span>
    </div>
  </section>

  <main id="dashboard-main">
    <aside id="filters" class="panel" aria-label="Dashboard filters">
      <div class="filter-group">
        <h3>Search playlist</h3>
        <input type="search" id="search" placeholder="Type a playlist name" aria-label="Search playlists" />
      </div>

      <div class="filter-group">
        <h3>Curator type</h3>
        <div id="curator-types" class="checkbox-list"></div>
      </div>

      <div class="filter-group">
        <h3>Release year range</h3>
        <label>
          From
          <input type="number" id="min-year" min="2005" max="2030" step="1" />
        </label>
        <label>
          To
          <input type="number" id="max-year" min="2005" max="2030" step="1" />
        </label>
      </div>

      <div class="filter-group">
        <h3>Diaspora focus</h3>
        <label>
          <input type="checkbox" id="diaspora-only" /> Highlight diaspora-led tracks
        </label>
      </div>

      <button id="reset-filters" type="button">Reset filters</button>
    </aside>

    <div class="dashboard-main-column">
      <section class="panel artist-panel" aria-label="Artist lookup">
        <div class="artist-panel-header">
          <div>
            <h2>Artist lookup</h2>
            <p>Search an artist to see where they appear across the filtered playlists.</p>
          </div>
          <div class="artist-search-control">
            <label for="artist-search" class="sr-only">Search artist</label>
            <input type="search" id="artist-search" name="artist-search" placeholder="Type an artist name" list="artist-options" autocomplete="off" />
            <datalist id="artist-options"></datalist>
            <button id="artist-clear" type="button" class="ghost-button">Clear</button>
          </div>
        </div>
        <div id="artist-empty" class="empty-state">
          Start typing an artist's name to surface their placements.
        </div>
        <div id="artist-results" class="artist-results" hidden>
          <div class="artist-meta">
            <div>
              <h3 id="artist-name">Artist</h3>
              <p id="artist-origin" class="artist-origin">Origin unknown</p>
            </div>
            <div id="artist-flags" class="artist-flags"></div>
          </div>
          <div class="cards artist-metrics">
            <article class="card">
              <h4>Playlists</h4>
              <strong id="artist-metric-playlists">0</strong>
            </article>
            <article class="card">
              <h4>Track placements</h4>
              <strong id="artist-metric-tracks">0</strong>
            </article>
            <article class="card">
              <h4>Avg popularity</h4>
              <strong id="artist-metric-popularity">--</strong>
            </article>
            <article class="card">
              <h4>Median position</h4>
              <strong id="artist-metric-position">--</strong>
            </article>
            <article class="card">
              <h4>Follower reach</h4>
              <strong id="artist-metric-followers">0</strong>
            </article>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Playlist</th>
                  <th>Curator</th>
                  <th>Tracks</th>
                  <th>Median position</th>
                  <th>Followers</th>
                  <th>First added</th>
                </tr>
              </thead>
              <tbody id="artist-playlist-rows"></tbody>
            </table>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Track</th>
                  <th>Playlist</th>
                  <th>Position</th>
                  <th>Popularity</th>
                  <th>Added</th>
                </tr>
              </thead>
              <tbody id="artist-track-rows"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="panel region-panel" aria-label="Regional spotlight">
        <div class="region-panel-header">
          <div>
            <h2>Regional spotlight</h2>
            <p>Dive into a region to inspect playlist reach, top artists, and diaspora balance.</p>
          </div>
          <div class="region-search-control">
            <label for="region-search" class="sr-only">Search region</label>
            <input type="search" id="region-search" name="region-search" placeholder="Search region" autocomplete="off" />
            <button id="region-clear" type="button" class="ghost-button">Clear</button>
          </div>
        </div>
        <div id="region-tabs" class="region-tabs" role="tablist" aria-label="Regions"></div>
        <div id="region-empty" class="empty-state">Pick a region to reveal its stats.</div>
        <div id="region-content" class="region-results" hidden>
          <div class="region-meta">
            <div>
              <h3 id="region-name">Region</h3>
              <p id="region-summary" class="region-summary">Summary</p>
            </div>
            <div id="region-flags" class="region-flags"></div>
          </div>
          <div class="cards region-metrics">
            <article class="card">
              <h4>Tracks</h4>
              <strong id="region-metric-tracks">0</strong>
            </article>
            <article class="card">
              <h4>Unique artists</h4>
              <strong id="region-metric-artists">0</strong>
            </article>
            <article class="card">
              <h4>Playlists</h4>
              <strong id="region-metric-playlists">0</strong>
            </article>
            <article class="card">
              <h4>Avg popularity</h4>
              <strong id="region-metric-popularity">--</strong>
            </article>
            <article class="card">
              <h4>Diaspora share</h4>
              <strong id="region-metric-diaspora">0%</strong>
            </article>
            <article class="card">
              <h4>Follower reach</h4>
              <strong id="region-metric-followers">0</strong>
            </article>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Artist</th>
                  <th>Placements</th>
                  <th>Playlists</th>
                  <th>Avg popularity</th>
                  <th>Median position</th>
                  <th>Diaspora share</th>
                </tr>
              </thead>
              <tbody id="region-artist-rows"></tbody>
            </table>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Playlist</th>
                  <th>Curator</th>
                  <th>Track placements</th>
                  <th>Unique artists</th>
                  <th>Median position</th>
                  <th>Followers</th>
                </tr>
              </thead>
              <tbody id="region-playlist-rows"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="panel country-panel" aria-label="Country spotlight">
        <div class="country-panel-header">
          <div>
            <h2>Country spotlight</h2>
            <p>Track how specific countries surface across playlists to spot emerging footholds.</p>
          </div>
          <div class="country-search-control">
            <label for="country-search" class="sr-only">Search country</label>
            <input type="search" id="country-search" name="country-search" placeholder="Search country" autocomplete="off" />
            <button id="country-clear" type="button" class="ghost-button">Clear</button>
          </div>
        </div>
        <div id="country-tabs" class="country-tabs" role="tablist" aria-label="Countries"></div>
        <div id="country-empty" class="empty-state">Pick a country to track its footprint.</div>
        <div id="country-content" class="country-results" hidden>
          <div class="country-meta">
            <div>
              <h3 id="country-name">Country</h3>
              <p id="country-summary" class="country-summary">Summary</p>
            </div>
            <div id="country-flags" class="country-flags"></div>
          </div>
          <div class="cards country-metrics">
            <article class="card">
              <h4>Tracks</h4>
              <strong id="country-metric-tracks">0</strong>
            </article>
            <article class="card">
              <h4>Unique artists</h4>
              <strong id="country-metric-artists">0</strong>
            </article>
            <article class="card">
              <h4>Playlists</h4>
              <strong id="country-metric-playlists">0</strong>
            </article>
            <article class="card">
              <h4>Avg popularity</h4>
              <strong id="country-metric-popularity">--</strong>
            </article>
            <article class="card">
              <h4>Diaspora share</h4>
              <strong id="country-metric-diaspora">0%</strong>
            </article>
            <article class="card">
              <h4>Follower reach</h4>
              <strong id="country-metric-followers">0</strong>
            </article>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Artist</th>
                  <th>Placements</th>
                  <th>Playlists</th>
                  <th>Avg popularity</th>
                  <th>Median position</th>
                  <th>Diaspora share</th>
                </tr>
              </thead>
              <tbody id="country-artist-rows"></tbody>
            </table>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Playlist</th>
                  <th>Curator</th>
                  <th>Track placements</th>
                  <th>Unique artists</th>
                  <th>Median position</th>
                  <th>Followers</th>
                </tr>
              </thead>
              <tbody id="country-playlist-rows"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="tabbed-content" aria-label="Dashboard insights" data-tab-root>

      <div class="chart-tabs" role="tablist" aria-label="Bias diagnostics">
        <button id="overview-tab" type="button" role="tab" aria-selected="true" aria-controls="overview-panel" tabindex="0" data-chart-tab="overview-panel" data-default-tab>Overview</button>
        <button id="release-tab" type="button" role="tab" aria-selected="false" aria-controls="release-panel" tabindex="-1" data-chart-tab="release-panel">Release momentum</button>
        <button id="popularity-tab" type="button" role="tab" aria-selected="false" aria-controls="popularity-panel" tabindex="-1" data-chart-tab="popularity-panel">Regional popularity</button>
        <button id="curator-tab" type="button" role="tab" aria-selected="false" aria-controls="curator-panel" tabindex="-1" data-chart-tab="curator-panel">Curator concentration</button>
        <button id="exposure-tab" type="button" role="tab" aria-selected="false" aria-controls="exposure-panel" tabindex="-1" data-chart-tab="exposure-panel">Exposure concentration</button>
      </div>

      <section id="overview-panel" class="chart-tab-panel" role="tabpanel" aria-labelledby="overview-tab" tabindex="0">
        <section class="cards" aria-label="Key metrics">
          <article class="card">
            <h4>Playlists analysed</h4>
            <strong id="playlist-count">0</strong>
            <span class="card-subtitle">after filters</span>
          </article>
          <article class="card">
            <h4>Tracks analysed</h4>
            <strong id="track-count">0</strong>
            <span class="card-subtitle">unique recordings</span>
          </article>
          <article class="card">
            <h4>Nigeria share</h4>
            <strong id="nigeria-share">0%</strong>
            <span class="card-subtitle">of tracks</span>
          </article>
          <article class="card">
            <h4>Diaspora representation</h4>
            <strong id="diaspora-share">0%</strong>
            <span class="card-subtitle">of tracks</span>
          </article>
          <article class="card">
            <h4>Regional diversity</h4>
            <strong id="diversity-score">0</strong>
            <span class="card-subtitle">avg. unique regions per playlist</span>
          </article>
        </section>

        <article class="panel chart-panel spotlight" aria-label="Regional representation spotlight">
          <div>
            <h3>Regional representation</h3>
            <p>Distribution of artist origins across the filtered playlists. Hover to inspect counts.</p>
          </div>
          <canvas id="region-chart" aria-label="Regional representation chart" role="img"></canvas>
        </article>

        <section class="panel" aria-label="Playlist breakdown">
          <div class="panel-heading">
            <h2>Playlist breakdown</h2>
            <p>
              Compare reach, regional diversity, and diaspora visibility. Metrics reflect the current filter selection.
            </p>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Playlist</th>
                  <th>Curator</th>
                  <th>Followers</th>
                  <th>Unique regions</th>
                  <th>Diaspora share</th>
                  <th>Nigeria share</th>
                  <th>Avg popularity</th>
                  <th>Median position</th>
                </tr>
              </thead>
              <tbody id="playlist-table"></tbody>
            </table>
          </div>
          <div id="empty-state" class="empty-state" hidden>
            No playlists match the filters. Adjust the search to see results.
          </div>
        </section>
      </section>

      <article id="release-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="release-tab" tabindex="-1">
        <div>
          <h3>Release momentum</h3>
          <p>Year-over-year volume of releases featured across playlists. Highlights how curators favour recency.</p>
        </div>
        <canvas id="release-chart" aria-label="Release momentum chart" role="img"></canvas>
      </article>
      <article id="popularity-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="popularity-tab" tabindex="-1">
        <div>
          <h3>Regional popularity</h3>
            <p>Average Spotify track popularity by artist region. Spotify assigns a 0-100 score; higher means hotter in the recent window.</p>
        </div>
        <canvas id="popularity-chart" aria-label="Regional popularity chart" role="img"></canvas>
      </article>
      <article id="curator-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="curator-tab" tabindex="-1">
        <div>
          <h3>Curator concentration</h3>
          <p>Share of Nigerian artists per curator category. Lower values signal broader regional coverage.</p>
        </div>
        <canvas id="curator-chart" aria-label="Curator concentration chart" role="img"></canvas>
      </article>
      <article id="exposure-panel" class="panel chart-panel chart-tab-panel is-hidden" role="tabpanel" aria-hidden="true" aria-labelledby="exposure-tab" tabindex="-1">
        <div>
          <h3>Exposure concentration</h3>
          <p>Top recurring primary artists across the selection. Higher bars mean heavier repeat playlisting.</p>
        </div>
        <canvas id="exposure-chart" aria-label="Exposure concentration chart" role="img"></canvas>
      </article>
    </section>
    </div>
  </main>

  <section id="methodology" class="panel methodology page-block" aria-label="How to interpret this dashboard">
    <h2>How to use this observatory</h2>
    <ul>
      <li><strong>Filter the inputs</strong>: Narrow curators, year range, or diaspora focus to mirror specific research questions.</li>
      <li><strong>Inspect imbalances</strong>: Use the region, release, and exposure charts to spot recency or curator-driven bias.</li>
      <li><strong>Validate metadata</strong>: Keep the artist CSV aligned with new playlists so regional insights remain trustworthy.</li>
      <li><strong>Refresh frequently</strong>: Run <code>python scripts/fetch_spotify_data.py</code> after updating playlist IDs or artist metadata.</li>
    </ul>
  </section>

  <footer>
    Data synthesised from Spotify playlists for prototyping only. Replace <code>data.js</code> with live API output for
    production research. Methods reference research into algorithmic gatekeeping.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" defer></script>
  <script src="data/scripts/data.js" defer></script>
  <script src="data/scripts/app.js" defer></script>
</body>
</html>
