<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Afrobeats Playlist Gatekeeping Observatory</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Afrobeats Playlist Gatekeeping Observatory</h1>
    <p>
      Explore how Spotify playlists shape the global identity of Afrobeats. Benchmark regional representation,
      curator influence, and sonic diversity across influential playlists to surface signals of gatekeeping and bias.
    </p>
  </header>

  <main>
    <aside id="filters" class="panel" aria-label="Dashboard filters">
      <div class="filter-group">
        <h3>Search playlist</h3>
        <input type="search" id="search" placeholder="Type a playlist name" aria-label="Search playlists" />
      </div>

      <div class="filter-group">
        <h3>Curator type</h3>
        <div id="curator-types" class="checkbox-list"></div>
      </div>

      <div class="filter-group">
        <h3>Release year range</h3>
        <label>
          From
          <input type="number" id="min-year" min="2005" max="2030" step="1" />
        </label>
        <label>
          To
          <input type="number" id="max-year" min="2005" max="2030" step="1" />
        </label>
      </div>

      <div class="filter-group">
        <h3>Diaspora focus</h3>
        <label>
          <input type="checkbox" id="diaspora-only" /> Highlight diaspora-led tracks
        </label>
      </div>

      <button id="reset-filters" type="button">Reset filters</button>
    </aside>

    <section class="dashboard-grid">
      <section class="cards" aria-label="Key metrics">
        <article class="card">
          <h4>Playlists analysed</h4>
          <strong id="playlist-count">0</strong>
          <span class="card-subtitle">after filters</span>
        </article>
        <article class="card">
          <h4>Tracks analysed</h4>
          <strong id="track-count">0</strong>
          <span class="card-subtitle">unique recordings</span>
        </article>
        <article class="card">
          <h4>Nigeria share</h4>
          <strong id="nigeria-share">0%</strong>
          <span class="card-subtitle">of tracks</span>
        </article>
        <article class="card">
          <h4>Diaspora representation</h4>
          <strong id="diaspora-share">0%</strong>
          <span class="card-subtitle">of tracks</span>
        </article>
        <article class="card">
          <h4>Regional diversity</h4>
          <strong id="diversity-score">0</strong>
          <span class="card-subtitle">avg. unique regions per playlist</span>
        </article>
      </section>

      <section class="visualisation" aria-label="Charts">
        <article class="chart-panel">
          <div>
            <h3>Regional representation</h3>
            <p>Distribution of artist origins across the filtered playlists. Hover to inspect counts.</p>
          </div>
          <canvas id="region-chart" aria-label="Regional representation chart" role="img"></canvas>
        </article>
        <article class="chart-panel">
          <div>
            <h3>Audio profile</h3>
            <p>Mean danceability, energy, valence, tempo, and acousticness for the filtered selection.</p>
          </div>
          <canvas id="audio-chart" aria-label="Audio profile radar" role="img"></canvas>
        </article>
        <article class="chart-panel">
          <div>
            <h3>Curator concentration</h3>
            <p>Share of Nigerian artists per curator category. Lower values signal broader regional coverage.</p>
          </div>
          <canvas id="curator-chart" aria-label="Curator concentration chart" role="img"></canvas>
        </article>
      </section>

      <section class="panel" aria-label="Playlist breakdown">
        <div style="margin-bottom: 1rem;">
          <h2 style="margin: 0 0 0.5rem 0;">Playlist breakdown</h2>
          <p style="margin: 0; color: var(--muted); font-size: 0.9rem;">
            Compare reach, regional diversity, and diaspora visibility. Metrics reflect the current filter selection.
          </p>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Playlist</th>
                <th>Curator</th>
                <th>Followers</th>
                <th>Unique regions</th>
                <th>Diaspora share</th>
                <th>Nigeria share</th>
                <th>Energy</th>
                <th>Danceability</th>
              </tr>
            </thead>
            <tbody id="playlist-table"></tbody>
          </table>
        </div>
        <div id="empty-state" class="empty-state" hidden>
          No playlists match the filters. Adjust the search to see results.
        </div>
      </section>
    </section>
  </main>

  <footer>
    Data synthesised from Spotify playlists for prototyping only. Replace <code>data.js</code> with live API output for
    production research. Methods reference Maasø &amp; Spilker (2022) and related scholarship on algorithmic gatekeeping.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js" defer></script>
  <script src="data.js" defer></script>
  <script src="app.js" defer></script>
</body>
</html>
