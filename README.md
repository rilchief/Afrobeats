# Afrobeats Playlist Gatekeeping & Bias Analysis

This project explores gatekeeping dynamics and potential bias in curated Afrobeats playlists, using Spotify playlist data and an interactive Streamlit dashboard.

The goal is to make it easy to:
- Inspect which curators and playlists drive exposure for Afrobeats artists.
- Understand regional and diaspora representation.
- Compare major vs independent label presence.
- Run basic statistical tests around popularity and representation.

## Key Components

- **Streamlit dashboard** (`scripts/dashboard.py`)
  - Interactive views of playlists, artists, regions, diaspora, labels, and popularity metrics.
  - Uses processed data in `data/processed/afrobeats_playlists.json`.
- **Bias/statistical analysis** (`scripts/analyze_bias.py`)
  - Runs chi-square tests, ANOVA/Kruskal–Wallis tests, and pairwise comparisons.
  - Writes a human-readable summary to `outputs/analysis_summary.md`.
- **Data processing & sync scripts** (`scripts/*.py`)
  - Fetch and update Spotify data, enrich with artist metadata, and keep processed datasets in sync.
- **Static web assets** (`web/`)
  - A lightweight web front-end (HTML/JS/CSS) for publishing or embedding summary visuals.

## Project Structure

- `data/`
  - `raw/` – raw playlist JSON exports from Spotify.
  - `processed/` – cleaned and feature-enriched datasets used by the dashboard and analyses.
  - `data/artist_metadata.csv` – supplemental metadata for artists.
- `scripts/`
  - `dashboard.py` – main Streamlit dashboard.
  - `dashboard_dash.py` – alternative dashboard implementation (e.g. Plotly Dash).
  - `analyze_bias.py` – statistical bias/representation analysis.
  - Other helpers: fetching playlists, syncing metadata, debugging tokens, etc.
- `notebooks/`
  - Exploratory analysis and project overview notebooks.
- `outputs/`
  - `analysis_summary.md` – generated bias/representation summary.
- `web/`
  - `index.html`, `assets/app.js`, `assets/style.css` – static site and front-end assets.

## Getting Started

### Prerequisites

- Python 3.10+.
- Recommended: a virtual environment.

Install dependencies from the project root:

```bash
pip install -r requirements.txt
```

This installs the core packages used by the dashboard and analysis scripts (Streamlit, pandas, plotly, etc.). Some optional scripts may require extra packages that you can add as needed.

## Configuration (Optional)

If you plan to fetch new data from Spotify, you will need to set up your credentials.

1.  Create a `.env` file in the project root.
2.  Add your Spotify API credentials (from [developer.spotify.com](https://developer.spotify.com/dashboard)):

    ```env
    SPOTIFY_CLIENT_ID=your_client_id_here
    SPOTIFY_CLIENT_SECRET=your_client_secret_here
    ```

3.  Ensure `data/playlist_config.json` contains the playlists you want to track.

This is **not required** to run the dashboard if you are using the existing dataset in `data/processed/`.

## Running the Dashboard

You have two dashboard options: a Streamlit app (recommended for analysis) and a Plotly Dash app.

### Using the Launcher (Windows)

The easiest way to start is using the PowerShell launcher:

```powershell
./launch_dashboards.ps1
```

This will give you a menu to launch either the Streamlit dashboard, the Dash dashboard, or both.

### Running Streamlit Manually

```bash
streamlit run scripts/dashboard.py --server.enableCORS false --server.enableXsrfProtection false
```
*Access at http://localhost:8501*

### Running Plotly Dash Manually

```bash
python scripts/dashboard_dash.py
```
*Access at http://localhost:8050*

## Static Web Dashboard

A lightweight, static version of the dashboard is available in the `web/` folder.
- **Entry point**: Open `web/index.html` in your browser.
- **Data source**: `web/data.js` (generated by `fetch_spotify_data.py`).

This is useful for publishing a read-only view without needing a Python server.


## Running the Bias Analysis

To generate or refresh the written bias analysis summary:

```bash
python scripts/analyze_bias.py
```

This will:
- Load the processed playlist dataset from `data/processed/afrobeats_playlists.json`.
- Compute tests for regional, label, popularity, and follower-count differences across curator types.
- Write a Markdown summary to `outputs/analysis_summary.md`.

You can then open `outputs/analysis_summary.md` directly or use it as content for reports or the web front-end.

## Next Steps & Contributions

- Extend the dataset to more playlists or time ranges.
- Refine region/diaspora classifications and label mappings.
- Add new visualizations or statistical tests to highlight gatekeeping patterns.

If you share this project or adapt it for other genres, consider documenting your changes so others can reproduce and build on your work.